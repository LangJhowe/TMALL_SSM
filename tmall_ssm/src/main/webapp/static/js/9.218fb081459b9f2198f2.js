webpackJsonp([9],{l8mW:function(e,r){},n9Yv:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("ZoQJ"),a=t("iF09"),o=t("vMJZ"),i={data:function(){return{orderForm:{uid:Object(a.c)()?Object(a.c)().id:"",address:"",post:"",receiver:"",mobile:"",userMessage:""},rules:{address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],post:[{required:!0,message:"请输入邮政编码",trigger:"blur"}],receiver:[{required:!0,message:"请输入收货人姓名(不超过25个字符)",max:25,trigger:"blur"}],mobile:[{required:!0,message:"请输入详手机号码(11位)",max:11,trigger:"blur"}]},orderList:[]}},computed:{sum:function(){var e=0;return this.orderList.forEach(function(r){e+=parseFloat(r.count)}),e},oiidList:function(){return this.$store.getters.cartList}},mounted:function(){this.getList()},methods:{onSubmit:function(){return!1},getList:function(){var e=this;if(null!=this.$store.getters.cartList){var r=this.$store.getters.cartList;Object(o.j)(r).then(function(r){var t=r.data;e.$CODES.SUCCESS==t.code&&(e.orderList=t.data.map(function(e){return{id:e.id,pid:e.pid,name:e.product.name,price:e.product.promotePrice,number:e.number,count:e.product.promotePrice*e.number,imgId:e.product.firstProductImage.id,normalDelivery:!0,deliveryWay:"1"}}))})}},renderHeader:function(e,r){return r.column,r.$index,e("div",{class:"table-name"},[e("img",{attrs:{src:"/static/img/tmallbuy.png",alt:""}}),e("a",{class:"store",attrs:{href:"javascript:void(0)"}},["店铺: 天猫店铺"]),e("a",{class:"wangwangLink",attrs:{href:"javascript:void(0)"}},[e("span",{class:"wangwangGif"})])])},formatPrice:function(e){return Object(s.d)(e,2)},applyOrder:function(){var e=this;this.orderForm.orderList=this.orderList,Object(a.c)()&&Object(a.c)().id&&this.$refs.orderForm.validate(function(r){r&&Object(o.e)(e.orderForm).then(function(r){var t=r.data;e.$CODES.SUCCESS==t.code&&(e.$store.dispatch("setOidList",t.data),e.$router.push({path:"/buyStep/stepPay",query:{total:t.total}}))})})}},watch:{route:function(e,r){this.getList()}}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"step1"},[t("div",{staticClass:"m_container"},[t("div",{staticClass:"form-box"},[t("h2",[e._v("输入收货地址")]),e._v(" "),t("el-form",{ref:"orderForm",staticClass:"order-form",attrs:{model:e.orderForm,rules:e.rules,"label-width":"100px",size:"small","label-position":"left"}},[t("el-form-item",{attrs:{label:"详细地址",required:"",prop:"address"}},[t("el-input",{attrs:{type:"textarea",placeholder:"建议您如实填写详细收货地址，例如接到名称，门牌号码，楼层和房间号等信息"},model:{value:e.orderForm.address,callback:function(r){e.$set(e.orderForm,"address",r)},expression:"orderForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮政编码",required:"",prop:"post"}},[t("el-input",{attrs:{placeholder:"如果您不清楚邮递区号，请填写000000"},model:{value:e.orderForm.post,callback:function(r){e.$set(e.orderForm,"post",r)},expression:"orderForm.post"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"收货人姓名",required:"",prop:"receiver"}},[t("el-input",{attrs:{placeholder:"长度不超过25个字符"},model:{value:e.orderForm.receiver,callback:function(r){e.$set(e.orderForm,"receiver",r)},expression:"orderForm.receiver"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码",required:"",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"请输入11位手机号码"},model:{value:e.orderForm.mobile,callback:function(r){e.$set(e.orderForm,"mobile",r)},expression:"orderForm.mobile"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"product-list"},[t("h2",[e._v("确认订单信息")]),e._v(" "),t("el-table",{attrs:{data:e.orderList}},[t("el-table-column",{attrs:{prop:"name","render-header":e.renderHeader,width:"600px"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"product-box"},[t("img",{attrs:{src:"/img/productSingle_middle/"+r.row.imgId+".jpg",alt:""}}),e._v(" "),t("div",{staticClass:"info"},[t("p",[e._v(e._s(r.row.name))]),e._v(" "),t("ul",{staticClass:"ensure"},[t("li",[t("img",{attrs:{src:"/static/img/creditcard.png",alt:"",title:"支持信用卡支付"}})]),e._v(" "),t("li",[t("img",{attrs:{src:"/static/img/7day.png",alt:"",title:"消费者保障服务,承诺7天退货"}})]),e._v(" "),t("li",[t("img",{attrs:{src:"/static/img/promise.png",alt:"",title:"消费者保障服务,承诺如实描述"}})])])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"price",label:"单价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v("￥ ")]),e._v(e._s(e.formatPrice(r.row.price))+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"数量",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"count",label:"小计",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticStyle:{color:"#c40000","font-weight":"bold"}},[e._v("￥"+e._s(e.formatPrice(r.row.count)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"way",label:"配送方式",width:"320px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"delivery-way"},[t("el-checkbox",{attrs:{size:"small"},model:{value:r.row.normalDelivery,callback:function(t){e.$set(r.row,"normalDelivery",t)},expression:"scope.row.normalDelivery"}},[e._v("普通配送")]),e._v(" "),t("el-select",{attrs:{size:"small"},model:{value:r.row.deliveryWay,callback:function(t){e.$set(r.row,"deliveryWay",t)},expression:"scope.row.deliveryWay"}},[t("el-option",{attrs:{label:"快递 免邮费",value:"1"}})],1)],1)]}}])})],1),e._v(" "),t("div",{staticClass:"more"},[t("div",{staticClass:"leaveMsg"},[t("span",[e._v("给店家留言:")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.orderForm.userMessage,expression:"orderForm.userMessage"}],attrs:{name:"leaveMsg",id:"",placeholder:"字数没做限制"},domProps:{value:e.orderForm.userMessage},on:{input:function(r){r.target.composing||e.$set(e.orderForm,"userMessage",r.target.value)}}})]),e._v(" "),t("div",{staticClass:"sum"},[t("p",[e._v("店铺合计(含运费): "),t("span",[e._v("￥"+e._s(e.formatPrice(e.sum)))])])])])],1),e._v(" "),t("div",{staticClass:"submit"},[t("div",[t("p",[e._v("实付款: "),t("strong",{staticClass:"actuallyPrice"},[e._v("￥"+e._s(e.formatPrice(e.sum)))])]),e._v(" "),t("button",{staticClass:"applyOrder red-btn",on:{click:function(r){return e.applyOrder()}}},[e._v("提交订单")])])])])])},staticRenderFns:[]},n=t("C7Lr")(i,l,!1,function(e){t("l8mW")},null,null);r.default=n.exports}});